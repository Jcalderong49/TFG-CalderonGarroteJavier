<div class="container">
  <h1 class="mt-4 mb-3">eCommerce <small>Productos</small></h1>
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a [routerLink]="['/']">Home</a></li>
    <li class="breadcrumb-item active">{{ isEdit ? 'Editar Producto' : 'Crear Producto' }}</li>
  </ol>
  <h2>{{ isEdit ? 'Editar Producto' : 'Crear Producto' }}</h2>
  <form [formGroup]="productForm" class="form-horizontal" (ngSubmit)="addProduct()">
    <div class="form-group">
      <label class="control-label col-sm-2" for="code">Código:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="code" formControlName="code"
               placeholder="Ingrese el código del producto" required>
        <div *ngIf="productForm.controls['code'].invalid && productForm.controls['code'].touched" class="text-danger">
          El código es obligatorio.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="nombre">Nombre:</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="nombre" formControlName="name"
               placeholder="Ingrese el nombre del producto" required>
        <div *ngIf="productForm.controls['name'].invalid && productForm.controls['name'].touched" class="text-danger">
          El nombre es obligatorio.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="descripcion">Descripción:</label>
      <div class="col-sm-10">
        <textarea class="form-control" id="descripcion" formControlName="description"
                  placeholder="Ingrese la descripcion del producto" required></textarea>
        <div *ngIf="productForm.controls['description'].invalid && productForm.controls['description'].touched" class="text-danger">
          La descripción es obligatoria.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="precio">Precio:</label>
      <div class="col-sm-10">
        <input type="number" class="form-control" step="any" id="precio" formControlName="price"
               placeholder="Ingrese el precio del producto" required>
        <div *ngIf="productForm.controls['price'].invalid && productForm.controls['price'].touched" class="text-danger">
          El precio es obligatorio y debe ser mayor que cero.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="imagen">Imagen:</label>
      <div class="col-sm-10">
        <input type="file" class="form-control" (change)="onFileSelected($event)">
        <div *ngIf="isEdit && currentImageUrl">
          <p>Imagen actual:</p>
          <img [src]="currentImageUrl" alt="Imagen actual" width="200">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-2">
        <button type="submit" class="btn btn-success" [disabled]="productForm.invalid">
          <span class="glyphicon glyphicon-saved"></span> Guardar
        </button>
      </div>
    </div>
  </form>
</div>
